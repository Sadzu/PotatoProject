# Электронный кошелек Картошка REST API

В качестве ответа возвращается application/json

В качестве тела запроса используется application/json

# Endpoints:
users, sessions, wallets, payments, remittances

Пользователи, сессии, кошельки, счета на оплату и денежные переводы соответственно

# Endpoint users

### POST /users - отвечает за создание пользователя

#### Body:

```
{
    "phone": long,
    "surname": "string",
    "name": "string",
    "patronymicName": "string",
    "email": "string",
    "birthDate": "string",
    "password": "string",
}
```

phone - номер телефона пользователя, включает в себя 11 цифр, начинается с "7"
также используется как уникальный id, один номер телефона - один пользователь

surname, name, patronymicName - ФИО пользователя,
допускаются только буквы русского алфавита, первые буквы - заглавные,
не более 50 символов по отдельности,
отчество является опциональным полем

email - адрес электронной почты пользователя, записывается в стандартном формате
к электронной почте может быть привязан только один пользователь

birthDate - дата рождения пользователя в формате ISO 8601 в качестве строки.

password - пароль пользователя. Особые требования к паролю:

- от 8 до 64 символов
- только латинские символы, цифры, знаки ?!
- обязательно наличие минимум 1 буквы верхнего и нижнего регистра, цифры и знака
- Пароль хранится исключительно в БД в хэшированном виде, алгоритм хэширования BCrypt

created - временная метка создания пользователя. Заполняется автоматически при успешном запросе.
Хранится в формате ISO 8601 в качестве строки.

changed - временная метка последнего изменения данных пользователя. Заполняется автоматически при успешном запросе.
При создании пользователя считается одинаковой с меткой создания. Хранится в формате ISO 8601 в качестве строки.

#### Example body:

```
{
    "phone": 78005553535,
    "surname": "Иванов",
    "name": "Иван",
    "patronymicName": "Иванович",
    "email": "example@example.com",
    "birthDate": "2012-12-12",
    "password": "Passw0rd?"
}
```

#### Response:

##### Http status codes: 200

```
{
    "phone": long,
    "surname": "string",
    "name": "string",
    "patronymicName": "string",
    "email": "string",
    "birthDate": "string",
    "create": "string"
}
```

В качестве ответа возвращаются данные пользователя, кроме пароля и временная метка создания пользователя.

##### Http status codes: 400, 500:

```
{
    "message": "error_message"
}
```

В качестве ответа возвращается сообщение об ошибке

### GET /users - отвечает за получение данных о пользователе

#### Body:

Тело запроса отсутствует

#### Response:

#### URL параметры:

phone - номер телефона

#### Example:

GET /users?phone=78005553535

Response: 

##### Http status codes: 200

```
{
    "phone": 8005553535,
    "surname": "string",
    "name": "string",
    "patronymicName": "string",
    "email": "string",
    "birthDate": "string"
}
```

В качестве ответа возвращается пользователь с запрошенным номером телефона.

##### Http status codes: 400

```
{
    "code": integer,
    "message": "error_message"
}
```

В качестве ответа возвращается сообщение об ошибке и код ошибки

###### Возможные коды ошибки http status code 400:

- 404 - пользователь не найден
- 402 - некорректный формат номера телефона

###### Http status codes: 500

```
{
    "code": integer,
    "message": "error_message;
}
```

В качестве ответа возвращается сообщение об ошибке и код ошибки

###### Возможные коды ошибки http status code 500:

- 504 - превышено время ожидания от сервера

### PATCH /users/{phone} - отвечает за изменение данных о пользователе

Разрешено менять только ФИО и дату рождения

#### Body:

```
{
    "surname": "string",
    "name": "string",
    "patronymicName": "string",
    "birthDate": "string"
}
```

Все параметры опциональные. Разрешается менять только их. Если в запросе не передано
ни одного параметра в теле запроса, то ничего не будет изменено.
При изменении хотя бы одного поля записывается новая дата изменения пользователя.

#### Response:

##### Http status codes: 200

```
{
    "message": "success_message"
}
```

В качестве ответа возвращается сообщение об успешном изменении данных

##### Http status codes: 400, 500

```
{
    "message": "error_message"
}
```

В качестве ответа возвращается сообщение об ошибке

# Endpoint sessions

### POST /sessions - отвечает за создание сессии


